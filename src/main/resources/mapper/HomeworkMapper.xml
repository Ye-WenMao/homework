<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.fifth.mapper.HomeworkMapper">
    <resultMap id="BaseResultMap" type="com.fifth.domain.Homework">
        <id column="homeworkId" jdbcType="INTEGER" property="id"/>
        <result column="homeworkName" jdbcType="VARCHAR" property="name"/>
        <collection property="classesList" ofType="com.fifth.domain.Classes">
            <id column="classId" jdbcType="INTEGER" property="id"/>
            <result column="className" jdbcType="VARCHAR" property="name"/>
        </collection>
    </resultMap>
    <select id="selectHomeWork" resultType="com.fifth.domain.Homework">
        SELECT homework.`name`, homework.create_time createTime
        FROM homework, class_course, student
        WHERE homework.id = class_course.homework_id AND class_course.class_id = student.class_id
        AND student.`no`= #{param1} AND homework.course_id = #{param2}
    </select>
    
    <select id="allPublishHomework" resultMap="BaseResultMap">
        SELECT homework.id homeworkId, homework.name homeworkName, classes.id classId, classes.name className
        from homework
		    JOIN class_homework ON homework.id = class_homework.homework_id
			JOIN classes ON class_homework.class_id = classes.id
			WHERE homework.course_id = #{id}
    </select>

    <select id="oneHomework" resultMap="BaseResultMap">
        SELECT homework.id homeworkId, homework.name homeworkName, classes.id classId, classes.name className
        from homework
		    JOIN class_homework ON homework.id = class_homework.homework_id
			JOIN classes ON class_homework.class_id = classes.id
			WHERE homework.id = #{id}

    </select>

</mapper>